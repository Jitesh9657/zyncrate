(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9143,e=>{"use strict";var n=e.i(43476),t=e.i(71645);function o(){let[e,o]=(0,t.useState)(null),[r,l]=(0,t.useState)(null),[i,s]=(0,t.useState)(!0),[d,a]=(0,t.useState)(""),[c,h]=(0,t.useState)(!1);if((0,t.useEffect)(()=>{let e=new URLSearchParams(window.location.search).get("key");if(!e){l("Missing key"),s(!1);return}fetch(`/api/download?key=${encodeURIComponent(e)}&info=true`).then(e=>e.json()).then(e=>{e.error?l(e.error):o(e)}).catch(e=>{console.error("Fetch error:",e),l("Failed to fetch file info")}).finally(()=>s(!1))},[]),i)return(0,n.jsx)("p",{style:{padding:20},children:"Loading..."});if(r)return(0,n.jsx)("p",{style:{padding:20,color:"red"},children:r});if(!e)return null;let u=e.expires_at?Number(e.expires_at)-Date.now():null,p=u?Math.floor(Math.max(0,u)/36e5):"Unknown";return(0,n.jsxs)("div",{style:{padding:20},children:[(0,n.jsx)("h1",{children:"File Details"}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Name:"})," ",e.file_name]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Size:"})," ",function(e){if(!e)return"Unknown size";let n=Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,n)).toFixed(2)} ${["B","KB","MB","GB"][n]}`}(e.file_size)]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Uploaded:"})," ",new Date(Number(e.created_at)).toLocaleString()]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Expires In:"})," ",p," hours"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Downloads:"})," ",e.download_count," / ",e.max_downloads||"Unlimited"]}),e.locked?(0,n.jsxs)("div",{style:{marginTop:12},children:[(0,n.jsx)("p",{children:"This file is locked â€” enter the key to download:"}),(0,n.jsx)("input",{value:d,onChange:e=>a(e.target.value),placeholder:"Enter key"})]}):null,(0,n.jsx)("div",{style:{marginTop:12},children:(0,n.jsx)("button",{onClick:()=>{if(!e)return;let n=`/api/download?key=${encodeURIComponent(e.key)}`;if(e.locked){if(!d||d.length<1)return alert("Enter the download key for this file.");n+=`&lock_key=${encodeURIComponent(d)}`}h(!0),window.location.href=n,setTimeout(()=>h(!1),2e3)},disabled:c,style:{padding:"8px 16px"},children:c?"Preparing...":"Download Now"})})]})}e.s(["default",()=>o])}]);